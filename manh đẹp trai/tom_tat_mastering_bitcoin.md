﻿# Chương 1: Giới thiệu## 1. Bitcoin là gì ?- Bitcoin là một tập hợp các khái niệm về tiền mã hóa .- Bitcoin là một đơn vị tiền tệ được dùng để lưu trữ và truyền giá trị giữa những người tham gia mạng Bitcoin. - Công nghệ Bitcoin dựa trên mã hóa và chữ ký số để đảm bảo an toàn cho mạng lưới Bitoin.- Bitcoin như là một loại tiền hoàn hảo cho Internet vì nó nhanh, an toàn và không giới hạn.- Người dùng bitcoin sở hữu key của mình để xác thực giao dịch của mình trên mạng blockchain. Những key này thường lưu trữ trên ví số của người dùng.- Bitcoin là một hệ thống hoàn toàn phân tán, hệ thống P2P.- Bitcoin cũng là tên của một giao thức, một loại mạng, và một sự đổi mới tính toán phân tán.- Bitcoin bao gồm:   - Một mạng không tập trung P2P (giao thức bitcoin).  - Một sổ cái giao dịch công khai (blockchain).  - Tính toán và phát hành tiền tệ (coins) không tập trung (khai thác phân tán).  - Một hệ thống xác minh giao dịch phân tán (transaction script).    ## 2. Lịch sử Bitcoin- Bitcoin được phát minh vào năm 2008 bởi Satoshi Nakamoto với việc xuất bản một bài báo có tựa đề “Bitcoin: Hệ thống tiền mặt điện tử ngang hàng”. - Shatoshi Nakamoto kết hợp vài sáng chế như b-money và HashCash để tạo ra hệ thống tiền điện tử hoàn toàn phi tập trung mà không phụ thuộc vào trung tâm phát hành tiền tệ và xác thực giao dịch.- Nó sử dụng hệ thống tính toán phân tán (thuật toán Proof of Work - PoW) - Mạng bitcoin bắt đầu vào năm 2009- Tổng giá trị Bitcoin trên thị trường ước tính 5 đến 10 tỷ đô la Mỹ- Giao dịch lớn nhất được xử lý bởi mạng là 150 triệu đô la Mỹ.-Satoshi Nakamoto rút khỏi công chúng vào tháng Tư năm 2011, để lại trách nhiệmphát triển mã và mạng cho một nhóm tình nguyện viên phát triển mạnh.- Phát minh này là một bước đột phá và sinh ra ngành khoa học mới trong lĩnh vực tính toán phân tán, kinh tế học và kinh tế lượng.# Chương 2: Bitcoin hoạt động như thế nào ?## 1. Transactions, Blocks, Mining và Blockchain### 	a. Giao dịch- Giao dịch được ghi vào sổ cái   - Phía gửi chứa một hoặc nhiều "inputs" ghi nợ vào tài khoản bitcoin.  - Phía nhận chứa một hoặc nhiều "outputs" là các khoản tín dụng được thêm vào tài khoản  bitcoin.  - inputs và outputs không bằng nhau. Outputs sẽ nhỏ hơn inputs do phí giao dịch.  - Các đầu ra từ một giao dịch có thể được sử dụng làm đầu vào trong một giao dịch mới.- Các hình thức giao dịch phổ biến :   - Loại giao dịch đơn giản nhất là giao dịch đơn giản từ một địa chỉ đến một địa chỉ khác, nó thay đổi số bitcoin của chủ sở hữu ban đầu. Nó gồm 1 đầu vào và 2 đầu ra .  - Một hình thức giao dịch phổ biến khác là một giao dịch tổng hợp một số đầu vào vào một đầu ra duy nhất.  - Một loại giao dịch khác là phân phối từ một đầu vào tới nhiều đầu ra (nhiều người nhận).### 	b. Xây dựng 1 giao dịch #### Nhận đầu vào phù hợp - Một giao dịch sẽ nhận đầu vào từ đầu ra của giao dịch ngay trước đó, để có thể tạo một giao dịch mới, ví phải chứa đủ bitcoin từ một output unspent hoặc nó phải quét rồi tính tổng các unspent outputs nhỏ hơn để có được unspent output đủ cho giao dịch.#### Tạo đầu ra - Khi giao dịch được tạo, chỉ người có chữ ký của khóa tương ứng với địa chỉ đích thì mới được nhận coin và ví sẽ bị tính thêm một ít tiền phí giao dịch.#### Thêm giao dịch vào sổ cái- Khi giao dịch gồm đủ tất cả những thông tin cần thiết, nó sẽ được đưa lên mạng. Mạng bitcoin là kết nối điểm điểm, mỗi bitcoin client tham gia bằng cách kết nối với các bitcoin client khác.- Ứng dụng ví sẽ gửi giao dịch mới đến một vài node mà nó kết nối đến qua Internet (không cần kết nối trực tiếp đến ví bitcoin của người nhận), các node đó lại ngay lập tức gửi tiếp đến các node khác mà nó kết nối đến -> do đó giao dịch nhanh chóng được truyền khắp mạng. ###	c. Khai thác bitcoin - Khi giao dịch đã được truyền trên toàn mạng, nó chưa nằm trong blockchain cho đến khi nó được xác nhận - Các giao dịch được đóng gói vào các khối, đòi hỏi một số lượng lớn các tính toán để chứng minh###	d. Khai thác giao dịch trong các khối - Một giao dịch được truyền qua mạng không được xác minh cho đến khi nó trở thành một phần của sổ kế toán phân phối toàn cầu, blockchain.- Cứ 10 phút trung bình, thợ đào tạo ra một khối mới chứa tất cả các giao dịch kể từ khối cuối cùng. - Thợ đào thêm những giao dịch chưa được xác xinh vào một chỗ gọi là "pool" tạm thời. Khi thợ đào thêm block mới, họ thêm các giao dịch đó vào block mới và cố gắng giải bài toán PoW (Proof-of-Work)- Khi giao dịch được thêm vào block, giao dịch có phí cao nhất sẽ được ưu tiên. Mỗi thợ đào sẽ bắt đầu đào block mới ngay khi họ nhận được block trước đó từ mạng. Họ tạo ra một block mới, thêm vào đó các giao dịch và mã hash của giao dịch trước, sau đó tính toán PoW cho block mới.- Thợ đào sẽ thêm vào block của họ một giao dịch đặc biệt là địa chỉ bitcoin của họ. Nếu họ giải được bài toán PoW, họ sẽ thêm được block vào blockchain là nhận được một phần thưởng là bitcoin.### 	e. Chi tiêu giao dịch- Sau khi được thêm vào sổ cái, mỗi khách hàng có thể độc lập xác minh giao dịch là hợp lệ và có thể chi tiêu.# Chương 3: The Bitcoin Client## 1. Bitcoin core- Bitcoin core giữ một bản sao đầy đủ của blockchain , với mỗi giao dịch đã từng xảy ra trên mạng bitcoin kể từ khi thành lập vào năm 2009.- Tập dữ liệu này có kích thước vài gigabyte (khoảng 16GB vào cuối năm 2013) và được tải xuống tăng dần trong vài ngày,- Khách hàng sẽ không thể xử lý giao dịch hoặc cập nhật số dư tài khoản cho đến khi tải xuống toàn bộ chuỗi khối lệnh.# Chương 4: Keys, Addresses, Wallets## 	1. Giới thiệu- Quyền sở hữu bitcoin được thiết lập thông qua các khóa số, địa chỉ bitcoin và  chữ ký.- Các khóa sô không được lưu trữ thực sự trong mạng mà nó được tạo ra và lưu trữ bởi người dùng cuối trong một file hoặc một cơ sở dữ liệu đơn giản gọi là ví.- Keys bao gồm:   - Public key   - Private key- Mỗi giao dịch cần phải có chữ ký hợp lệ để được thêm vào blockchain.- Người dùng hiếm khi nhìn thấy keys vì nó được lưu và quản lí trong phần mềm ví.- Trong phần thanh toán của người dùng bitcoin, public key của người nhận được biễu diễn bằng chữ ký số, gọi là địa chỉ bitcoin (đa số là public key) . ### 	a. Mã hóa public key và tiền mã hóa- Mã hóa public key là một nền tảng toán học để bảo mật máy tính và thông tin.- Bitcoin sử dụng phép nhân đường cong elip làm cơ sở cho mã hóa public key.- Bitcoin sử dụng mã hóa khóa công khai để tạo cặp khóa kiểm soát quyền truy cập vào bitcoin. -  Mỗi khi tiêu bitcoin, họ phải đưa ra public key và chữ ký .-  Trong hầu hết các ví, private key và public key được lưu trữ như là một cặp cho thuận tiện, Tuy nhiên, public key có thể được tính toán từ private key.### 	b. Private and public keys- Từ private key (k), sử dụng phép nhân đường cong elip - một hàm mã hóa một chiều để tạo ra một public key (K).- Từ public key, ta sử dụng hàm băm mật mã một chiều để tạo ra địa chi bitcoin (A)### 	c. Private keys- Private key là một số, được chọn ngẫu nhiên.- Quyền sở hữu và kiểm soát private key là của người dùng root với tất cả các quỹ được liên kết với địa chỉ Bitcoin- Private key phải là bí mật .- Private key phải được sao lưu và bảo vệ khỏi những mất mát.###  d. Public keys- Public key được tính từ private key qua phép nhân đường cong elip, thông thể tính đảo ngược được:   				**K = k * G**  	Trong đó:   	- K: Public key  	- k: private key  	- G: điểm hằng số - Điểm phát (Generator point)## 	2. Địa chỉ bitcoin- Bitcoin address là một mỗi các số và chữ có thể chia sẻ cho bất cứ ai muốn gửi tiền cho bạn.- Địa chỉ được tạo ra từ khóa công khai bao gồm một chuỗi các số và chữ cái, bắt đầu bằng chữ số “1”.- Địa chỉ bitcoin bắt nguồn từ khóa công khai thông qua việc sử dụng hàm băm 1 chiều  crypto..- Các hàm băm mã hóa được sử dụng rộng rãi trong bitcoin: bitcoin addresses, script address, trong việc đào PoW.- Thuât toán sử dụng để tạo bitcoin address là SHA và RIPEMD, đặc biệt là SHA256 và RIPEMD160.- Bitcoin address không giống với public key, bitcoin address được lấy từ khóa công khai bằng cách sử dụng hàm một chiều.-  Bticoin address hầu như luôn được hiển thị cho người dùng ở dạng mã hóa Base58Check.## 3. Ví- Ví chứa private keys, thường được tổ chức dưới dạng tệp tin hoặc cấu trúc dữ liệu đơn giản.- Ví chứa các keys, không chứa coins. Coin đươc lưu trữ trên blockchain dưới dạng các outputs của giao dịch. ### 	a. Ví ngẫu nhiên  - Là loại ví được sưu tập từ các private keys được tạo ngẫu nhiên.- Bitcoin core client ban đầu có thể sinh ngẫu nhiên ra nhiều private keys và có thế tạo ra tiếp nếu cần thiết, mỗi key chỉ dùng một lần. - Mỗi khóa phải được sao lưu hoặc số tiền mà nó kiểm soát sẽ bị mất không thể thu hồi nếu ví trở nên không thể tiếp cận.### 	b. Ví xác định - Là loại ví chứa các private keys được tạo từ một seed, qua việc sử dụng hàm băm một chiều.- Seed là một số được tạo ngẫu nhiên và kết hợp với các dữ liệu khác.- Seed có thể dùng để khôi phục các keys- Seed cũng dùng để nhập xuất ví, cho phép di chuyển dễ dàng tất cả các keys giữa các ví khác nhau.### c. Mnemonic Code Words - Mnemonic codes là chuỗi các từ tiếng anh đại diện cho một số ngẫu nhiên sử dụng như seed cho ví xác định.- Chuỗi các từ này có thể tạo lại seed và tạo lại tất cả các keys trong ví.- Mnemonic codes giúp người dùng dễ dàng sao lưu ví, vì chúng dễ đọc và phiên âm chính xác, so với chuỗi số ngẫu nhiên- Mnemonic codes được định nghĩa bởi Bitcoin Improvement Proposal 39 (BIP0039) qua các bước: 	- Tạo một chuỗi entropy ngẫy nhiên 128-256 bits	- Tạo checksum cho chuỗi đó bằng cách lấy một vài bits đầu tiên của mã hash SHA256 của nó.	- Thêm checksum vào cuối chuỗi này.	- Chia chuỗi thành các phần 11 bits, sử dụng chỉ số từ điển của 2048 từ được xác đinh trước.	- Đưa ra 12-24 từ đại diện cho mnemonic codes### d. Ví xác định phân cấp - HD wallet là một dạng cải tiến của ví xác định.- HD wallet cấp  có 2 ưu điểm hơn so với ví ngẫu nhiên:   - Cấu trúc cây có thể thực hiện chức năng mở rộng cho tổ chức, ví dụ:  - Tạo các chuỗi public keys mà không cần truy cập vào private key tương ứng.- Tạo ví HD:   - HD wallet được tạo từ một Seed gốc duy nhất.  - Seed gốc được nhập vào thuật toán HMAC-SHA512 và băm kết quả được sử dụng để tạo private key (m) và mã chuỗi chủ.  - Khóa riêng chính (m) sau đó tạo ra một khóa công khai chính tương ứng (M).  - sử dụng quá trình nhân rộng đường cong elliptic bình thường m * G .## 4. Advanced Keys and Addresses### 	a. Encrypted Private Keys (BIP38)- Private key được lưu trữ trong ví được mã hóa bằng mật khẩu có thể an toàn, nhưng ví đó cần được sao lưu.- BIP0038 đề xuất một tiêu chuẩn chung để mã hóa khóa cá nhân bằng cụm mật khẩu và mã hóa chúng bằng Base58Check .- Kết quả của lược đồ mã hóa BIP0038 là private key được mã hóa Base58Check được mã hóa bắt đầu bằng tiền tố 6P.- Trường hợp sử dụng phổ biến nhất cho các khóa mã hóa BIP0038 dành cho ví giấy có thể được sử dụng để sao lưu các khóa cá nhân trên một mảnh giấy.### 	b. Pay to script hash (P2SH) - Multi-Sig Addresses- Địa chỉ bitcoin bắt đầu bằng số "3" được gọi là P2SH addresses hay Multi-Sig addresses- người thụ hưởng giao dịch bitcoin làm mã hash của tập lệnh thay vì chủ sở hữu public key.### 	c. Vanity AddressesĐịa chỉ ảo là địa chỉ bitcoin hợp lệ chứa các thông điệp có thể đọc được.### 	d. Paper Wallets- Ví giấy là private key bitcoin được in trên giấy, thông thường nó được kèm theo địa chỉ bitcoin tương ứng.# Chương 5: Các giao dịch## 1. Giới thiệuGiao dịch là một cấu trúc dữ liệu mã hóa việc  truyền giá trị giữa những người tham gia mạng lưới bitcoin.## 2. Vòng đời giao dịchKhởi tạo ---> ký ---> Quảng bá ---> Lan truyền  ---> Xác minh  và thêm vào block  ---> Ghi vào blockchain.### 	a. Tạo giao dịch- Giao dịch có thể được tạo trực tuyến hoặc ngoại tuyến bởi bất kỳ ai.- Khi giao dịch đã được tạo, nó được ký bởi chủ sở hữu.- Giao dịch phải được đưa lên mạng bitcoin và được truyền bá đến khi một thợ đào xác minh nó vào sổ cái blockchain.### 	b. Quảng bá giao dịch lên mạng bitcoin- Với giao dịch đã được gửi tới mạng bitcoin ,mọi thông tin là minh bạch và công khai , kgoong nhất thiết cần danh tính của người thực hiện giao dịch.- Giao dịch bitcoin có thể truyền qua các mạng không an toàn ### 	c. Lan truyền giao dịch trên mạng bitcoin- Giao dich  bitcoin được phê chuẩn bởi các node: 	- Nếu hợp lệ, nút đó sẽ truyền nó đến các nút khác mà nó được kết nối và thông báo thành công sẽ được trả về đồng bộ cho người khởi tạo	- Nếu không hợp lệ, node đó sẽ từ chối và gửi thông báo từ chối cho người gửi.- Để chống lại spam và các cuộc tấn công, mỗi node sẽ độc lập xác thực mọi giao dịch trước khi truyền bá nó sang node khác. Một giao dịch không hợp lệ sẽ không đi qua được hơn một node.## 3. Cấu trúc một giao dịchGiao dịch gồm có các trường: - Version- Input Counter- Inputs- Output Counter- Outputs- Locktime## 4. ra vào giao dịch:- UTXO được ghi lại trên blockchain và là đơn vị tiền tệ của toàn bộ mạng.- Số dư bitcoin của người dùng được tính toán bởi ví của người dùng bằng cách quét toàn bộ blookchain và tổng hợp toàn bộ  UTXO của người đó.- UTXO được tiêu thụ bởi một giao dịch được gọi là giao dịch đầu vào, trong khi UTXO được tạo bởi một giao dịch được gọi là kết quả giao dịch.### 	a. Đầu ra:- Transaction outputs gồm 2 phần: 	- Tổng lượng bitocoin tính bằng đơn vị satoshis	- Một locking script, còn gọi là "encumbrance": chỉ ra điều kiện để tiêu output.### 	b. Đầu vào- Inputs là con trỏ trỏ đến UTXO. Chúng trỏ đến UTXO tham chiếu đến hash của giao dịch và chuỗi số, nơi ghi UTXO trên blockchain.- Để tiêu UTXO cần có script mở khóa, thường là chữ ký chứng minh quyền sở hữu bitcoin.- Đầu vào bao gồm:	- Transaction hash	- Output Index	- Unlocking-Script Size 	- Unlocking-Script	- Sequence Number### 	c. Phí giao dịch:- Hầu hết các giao dịch có phí để trả cho các thợ đào để giữ an toàn cho mạng.- Tác dụng:	- Khuyến khích giao dịch được thêm vào block tiếp theo	- Làm giảm các giao dịch spam hoặc làm dụng hệ thống- Phí là không bắt buộc nhưng giao dịch sẽ bị đẩy xuống xử lý cuối cùng. Các giao dịch có đủ phí sẽ được ưu tiên xử lý### 	d. Thêm phí vào giao dịch- Cấu trúc dữ liệu của các giao dịch không có trường cho phí:	Fees = Sum(Inputs) - Sum(Outputs)## 5. Transaction Chainning và Orphan transactions- Các giao dịch tạo một chuỗi, một giao dịch chi tiêu output của giao dịch trước đó (gọi là parent) và tạo output cho chuỗi giao dịch (gọi là child).- Khi cùng lúc thực hiện các giao dịch parent ,child ,.. thì sẽ ưu tiên xác thực giao dich trẻ trước.- Nếu các giao dịch child đến trước parent chúng tham chiếu đến . chúng sẽ được đưa đến pool cho đến khi parent được xác nhận .- Nhóm giao dịch không có parent được gọi là nhóm giao dịch mồ côi.- Số giao dịch mồ côi trong pool được giới hạn và đến ngưỡng giới hạn sẽ bị lọc ra khỏi pool.## 6. Transaction script and script language:### 	a. Cấu trúc script (Lock và Unlock)Công cụ xác minh giao dịch của bitcoin dựa trên 2 loại script: - Locking script:   - Đặt ở output của giao dịch  - Nó yêu cầu các điều kiện cần có khi chi tiêu ở lần sau  - Còn được gọi là scriptPubKey vì nó chứa public key hoặc bitcoin address.- Unlocking script:   - Giải quyết các điều kiện của locking script, cho phép chi tiêu output  - Là một phần của giao dịch, chứa chữ ký số.  - Còn được gọi là scriptSig vì nó thường chứa chữ ký số.- Hoạt động: 	- Unlocking script được thực thi, sử dụng stack	- Nếu nó không có lỗi, stack chính được sao chép và locking script được thực thi. Nếu kết quả thực thi locking scriptvaf dữ liệu stack được copy từ unlocking script là true thì unlocking script được giải quyết thành công, được ủy quyển để chi tiêu.	- Nếu kết quả khác true thì không được quyền chi tiêu UTXO### 	b. Ngôn ngữ script- Sử dụng cấu trúc dữ liệu được gọi là ngăn xếp.- Xử lý từng mục từ trái sang phải. - Toán tử điều kiện đánh giá điều kiện tạo ra kết quả boolean TRUE hoặc FALSE. ## 7. Giao dịch chuẩn- Có 5 dạng giao dịch chuẩn:   - Pay to Public Key Hash (P2PKH)   -  Public-Key  -  Multi-Signature  -  Pay to Script Hash (P2SH)  -  Data Output# Chương 6: Mạng Bitcoin## 1. Kiến trúc mạng ngang hàng- Bitcoin được cấu trúc như một kiến trúc mạng ngang hàng sử dụng giao thức P2P Bitcoin trên Internet. ## 2. Các loại Node và vai trò- Các loại Node phổ biến:  - Bitcoin core  - full blockchain node  - Solo miner  - SPV wallet  - Pool protocol sever  - Mining nodes  - SPV stratum wallet- 1 node là tập hơp 4 vai trò:   - Wallet   - Miner   - Full blockchain   - Network routing node## 3. Network Discovery - Một nút mới phải khám phá ít nhất một nút hiện có trên mạng và kết nối với nó.- Để kết nối với một peer đã biết, các nút thiết lập kết nối TCP## 4. Full nodes- Các nút đầy đủ là các nút duy trì một blockchain đầy đủ với tất cả các giao dịch.- Một node đầy đủ bất kỳ có thể độc lập xác minh 1 giao dịch mà không cần phải thông qua các node hay nguồn thông tin khác.## 5. Exchanging “Inventory”  - Các node mới cần phải đồng bộ hóa bằng cách thiết lập blockchain đầy đủ.- Dựa trên phiên bản blockchain của đồng nghiệp , các node sẽ so sánh và tải về những block mà nó thiếu.## 6. Simplified Payment Verification (SPV) Nodes - Các node chạy trên hệ thống có hạn chế không gian sẽ được duy trì hoạt động thông qua phương thức SPV mà không cần lưu trữ toàn bộ blockchain.- Các node SPV chỉ tải xuống các tiêu đề khối và không tải xuống các giao dịch bao gồm trong mỗi khối. - Để có được các tiêu đề khối, các nút SPV sử dụng một thông điệp getheaders thay vì getblocks.- Các yêu cầu của nút SPV cho dữ liệu cụ thể có thể vô tình tiết lộ địa chỉ trong ví của họ. Do đó giải pháp là sử dụng bộ lọc Bloom.## 7. Transaction Pools - Transaction Pools  dùng để lưu trữ các giao dịch chưa được xác nhận .## 8. Thông báo cảnh báo- Thông điệp cảnh báo được truyền bằng thông báo cảnh báo. Thông báo cảnh báo có một số trường, bao  gồm:  -  ID - Một cảnh báo được xác định để có thể phát hiện các cảnh báo trùng lặp  -  Hết hạn - một thời gian sau khi cảnh báo hết hạn  -  RelayUntil - một thời gian mà cảnh báo không được chuyển tiếp  -  MinVer, MaxVer - một loạt các phiên bản giao thức bitcoin mà cảnh báo này áp dụng cho  -  subVer - Phiên bản phần mềm ứng dụng khách mà cảnh báo này áp dụng cho  -  Ưu tiên - Mức độ ưu tiên cảnh báo, hiện chưa sử dụng- Cảnh báo được ký bằng mật mã bởi khóa công khai.- Mỗi nút nhận được thông điệp cảnh báo này sẽ xác minh nó, kiểm tra hết hạn, và truyền bá nó cho tất cả các đồng nghiệp của nó.# Chương 7: The Blockchain## 1. Cấu trúc của 1 khối - Một khối là cấu trúc dữ liệu vùng chứa tổng hợp các giao dịch để đưa vào sổ cái công khai, blockchain. - Bao gồm: block size , block header, transaction counter, transactions.## 2. Block Header- Bao gồm: Version, previous block hash, merkle root, timestamp, difficulty target, nonce.## 3. Bộ nhận diện khối - Một khối có thể được xác định theo hai cách, bằng cách tham chiếu khối băm hoặc bằng cách tham chiếu chiều cao khối.## 4. Liên kết các khối trong Blockchain- Các nút Bitcoin duy trì một bản sao cục bộ của blockchain, bắt đầu từ khối genesis. - để thiết lập liên kết chúng sẽ kiểm tra trường previous block header hash so sánh với header hash của nó  và thêm vào cuối chuỗi .## 5. Cây Merkle- Cây Merkle của 1 khối lưu trữ bản sao tóm tắt toàn bộ các giao dịch trong khối.- Sử dụng thuật toán double-SHA256.# Chương 8: Khai thác và đồng thuận## 1. Kinh tế Bitcoin và tạo tiền tệ- Bitcoin được "đúc" trong khi tạo ra mỗi khối với tốc độ cố định và giảm dần.- Với 21 triệu đồng Bitcoin dự tính sẽ được phát hành. các thợ đào sẽ chỉ nhận được tiền thưởng thông qua phí giao dịch .## 2. Sự đồng thuận không tập trung   - Xác minh độc lập từng giao dịch  - Tổng hợp độc lập các giao dịch đó thành các khối mới   - Xác minh độc lập các khối mới bằng mọi nút và lắp ráp thành một chuỗi  - Lựa chọn độc lập.## 3. Xác minh độc lập các giao dịch - Giao dịch sẽ được xác minh tại node dầu tiên nó quảng bá và sẽ bị hủy nếu nó không hợp lệ## 4. Tổng hợp các giao dịch thành các khối### a. Tuổi giao dịch, phí và mức độ ưu tiên-  **Mức độ ưu tiên = Tổng (Giá trị đầu vào * Độ tuổi đầu vào) / Kích thước giao dịch**-  **High Priority > 100,000,000 satoshis * 144 blocks / 250 bytes = 57,600,000**- Giao dịch bitcoin không có thời gian hết hạn.### b. Phần thưởng và phí Coinbase- Các khoản phí được tính như sau:- **Tổng số phí = Tổng (Đầu vào) - Tổng (Đầu ra)**- Phần thưởng được tính theo chiều cao khối ,50 bitcoin cho mỗi khối và giảm một nửa mỗi 210.000 khối.### c. Coinbase Data- Generation Transaction không có trường mã mở khóa mà được thay bằng dữ liệu Coinbase.## 5. Xác nhận một khối mới- Việc xác nhận độc lập của mỗi khối mới bởi mỗi nút trên mạng đảm bảo mà các thợ đào không thể gian lận.## 6. Lắp ráp và chọn chuỗi khối- Các nút duy trì ba bộ khối:  - Các khối kết nối với blockchain chính  - Các khối tạo thành nhánh khỏi blockchain chính (chuỗi thứ cấp)  - Cuối cùng là các khối không có cha mẹ đã biết trong các chuỗi đã biết (trẻ mồ côi).- Trường hợp một khối mở rộng 1 chuỗi không phải chuỗi chính , khối sẽ gắn các khối vào 1 chuỗi gọi là chuỗi thứ cấp- So sánh độ dài chuỗi thứ cấp và chuỗi chính để chọn chuỗi chính mới là chuỗi có độ dài lớn hơn.## 7. Khai thác và Cuộc đua Hashing- Khai thác Bitcoin là một ngành rất cạnh tranh và ngày càng được đầu tư kỹ lưỡng và dần trở thành một cuộc đua khốc liệt giữa các thợ đào.### Giải pháp bổ sung Nonce-Sử dụng giao dịch coinbase như một nguồn của các giá trị nonce thêm.### Mining Pools- Các thợ đào solo sẽ rất khó khăn để cạnh tranh hiện nay, và giải pháp cho họ là tham gia kết nối với Mining Pools để cùng kết hợp khai thác với các thợ đào khác, việc này đáp ứng được các khoản thu và giảm thiểu các rủi ro về công nghệ- Sử dụng thuật toán Proof-ofWork của bitcoin để đo lường sự đóng góp của mỗi thợ đào và phân chia phần thưởng hợp lý.- Managed Pools sẽ quản lý các thợ đào và thu phí theo % thu nhập .- Pool miners kết nối với pool server bằng cách sử dụng giao thức khai phá như Stratum (STM) hoặc GetBlockTemplate (GBT).# Chương 9: Chuỗi thay thế, Đơn vị tiền tệ và Các ứng dụng# Chương 10: Bảo mật Bitcoin-------**_Chế Quang Mạnh_**-------